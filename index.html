<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laporan Keuangan Harian</title>
  <link href="./dist/output.css" rel="stylesheet">

  <!-- ==================== Supabase & Chart.js ==================== -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>

  <style>
  @media print {
    /* Default: semua sembunyi */
    body * {
      display: none !important;
    }

    /* Hanya tampilkan bagian laporan */
    #tabel, #tabel * {
      display: block !important;
    }

    /* Sembunyikan kolom aksi di tabel cetak */
    #tabel th:last-child,
    #tabel td:last-child {
      display: none !important;
    }

    /* Rapikan style print */
    #tabel {
      width: 100%;
      margin: 0 auto;
      font-family: Arial, sans-serif;
    }

    #tabel h1 {
      margin-bottom: 15px;
      text-align: center;
    }

    #tabel table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    #tabel th, #tabel td {
      border: 1px solid #444;
      padding: 6px;
      font-size: 13px;
      text-align: left;
    }
  }
  </style>

</head>
<body class="bg-gradient-to-tr from-sky-100 to-sky-200 font-sans min-h-screen">

  <!-- Judul -->
  <h1 class="text-4xl font-extrabold mb-6 mt-6 text-center text-gray-800 drop-shadow">
    Laporan Keuangan Harian
  </h1>

  <!-- Tanggal -->
  <div id="tanggalNow" class="bg-gradient-to-l from-orange-200 to-orange-400 text-center text-lg md:text-xl 
                              drop-shadow-lg font-semibold text-slate-800 mb-6 rounded-xl p-3">
    <p>Tanggal</p>
    <p id="tanggal"></p>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-8">
    
    <!-- Saldo -->
    <div class="bg-gradient-to-r from-green-300 to-green-600 p-5 rounded-xl shadow-lg 
                hover:scale-105 transition-transform duration-200">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-gray-700 font-medium">Saldo</p>
          <p id="saldo" class="text-2xl font-bold mt-2">Rp0</p>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8"
             stroke-linecap="round" stroke-linejoin="round"
             class="w-9 h-9 text-slate-800 flex-shrink-0">
          <path d="M3 7.5A2.5 2.5 0 0 1 5.5 5H16a2 2 0 0 1 2 2v1.5M3 9.5h15a2 2 0 0 1 2 2v4A2.5 2.5 0 0 1 17.5 18h-12A2.5 2.5 0 0 1 3 15.5v-6Z"/>
          <path d="M17 12.5h2.5M7 7.5h6"/>
        </svg>
      </div>
    </div>

    <!-- Pemasukan -->
    <div class="bg-gradient-to-r from-blue-300 to-blue-100 p-5 rounded-xl shadow-lg 
                hover:scale-105 transition-transform duration-200">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-gray-700 font-medium">Pemasukan</p>
          <p id="totalPemasukan" class="text-2xl font-bold mt-2">Rp0</p>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8"
             stroke-linecap="round" stroke-linejoin="round"
             class="w-9 h-9 text-slate-800 flex-shrink-0">
          <ellipse cx="9" cy="6.5" rx="6" ry="2.5"/>
          <path d="M3 6.5V10c0 1.4 2.7 2.5 6 2.5s6-1.1 6-2.5V6.5M6 13.5V17c0 1.4 2.7 2.5 6 2.5 
                   2.2 0 4.1-.5 5.2-1.2"/>
          <ellipse cx="18" cy="13" rx="3" ry="1.2"/>
          <path d="M15 13v3c0 .7 1.3 1.2 3 1.2s3-.5 3-1.2v-3"/>
        </svg>
      </div>
    </div>

    <!-- Pengeluaran -->
    <div class="bg-gradient-to-r from-red-300 to-red-100 p-5 rounded-xl shadow-lg 
                hover:scale-105 transition-transform duration-200">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-gray-700 font-medium">Pengeluaran</p>
          <p id="totalPengeluaran" class="text-2xl font-bold mt-2">Rp0</p>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round"
             class="w-9 h-9 text-slate-800 flex-shrink-0">
          <path d="M12 4v16m0 0l-6-6m6 6l6-6"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Form Input -->
  <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
    <form id="formTransaksi" class="flex flex-col sm:flex-row gap-3 items-center">
      <input type="text" id="deskripsi" placeholder="Deskripsi" 
             class="border p-3 rounded-lg flex-1 focus:ring-2 focus:ring-blue-400">
      <input type="number" id="nominal" placeholder="Nominal" 
             class="border p-3 rounded-lg w-full sm:w-28 focus:ring-2 focus:ring-blue-400">
      <select id="tipe" 
              class="border p-3 rounded-lg w-full sm:w-36 focus:ring-2 focus:ring-blue-400">
        <option value="pemasukan">Pemasukan</option>
        <option value="pengeluaran">Pengeluaran</option>
      </select>
      <button type="submit" 
              class="bg-blue-500 text-white p-3 rounded-lg w-full sm:w-32 
                     hover:bg-blue-600 active:scale-95 transition-all flex items-center justify-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" 
             viewBox="0 0 24 24" stroke="currentColor" 
             class="w-5 h-5 flex-shrink-0">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 4v16m8-8H4" />
        </svg>
        Tambahkan
      </button>
    </form>
  </div>

  <!-- Chart -->
  <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
    <canvas id="chartKeuangan"></canvas>
  </div>

  <!-- Tombol Cetak -->
  <button type="button" onclick="cetakLaporan()" 
    class="bg-green-500 text-white px-4 py-2 rounded-lg mb-6 hover:bg-green-600 active:scale-95 transition-all">
    Cetak Laporan
  </button>

  <!-- Tabel -->
  <div id="tabel" class="bg-white p-6 rounded-xl shadow-lg overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-2 text-left text-gray-600 font-medium">Deskripsi</th>
          <th class="px-4 py-2 text-left text-gray-600 font-medium">Nominal</th>
          <th class="px-4 py-2 text-left text-gray-600 font-medium">Tipe</th>
          <th class="px-4 py-2 text-left text-gray-600 font-medium">Timestamp</th>
          <th class="px-4 py-2 text-left text-gray-600 font-medium">Aksi</th>

        </tr>
      </thead>
      <tbody id="tabelTransaksi" class="divide-y divide-gray-100"></tbody>
    </table>
  </div>

<script src="app.js"></script>
</body>
</html>
